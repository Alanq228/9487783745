var renderEmbeds=function(){var e,t,a,i,l,s,o,p,f,u,c,r,d=(e=window.addEventListener?"addEventListener":"attachEvent",t="attachEvent"==e?"onmessage":"message",a="undefined"!=typeof isPulsEmbed&&isPulsEmbed,i={},o=s=l=null,p="undefined"!=typeof originalReferrer?originalReferrer:document.referrer,f={dleBroadcast:["ALL_PLAYER_STOP"],bookmarkletVideo:["GET_VIDEO_INFO","VIDEO_INFO","GET_EMBED_CONFIG","EMBED_CONFIG"],playerEvents:["PLAYING_END","PLAYER_ERROR"]},u=function(e,t){var n=i[e];if(n&&0<n.length)for(var a=0;a<n.length;a++)n[a]&&"function"==typeof n[a].callback&&(n[a].callback(t),!1!==n[a].expire&&delete n[a])},c=function(e){try{return JSON.parse(e)}catch(e){return null}},window[e](t,function(e){var t=e.origin,n=l?l.src:"",a=-1<n.indexOf(t)||-1<location.href.indexOf(t)||-1<p.indexOf(t);if(e.data&&a){var i=c(e.data);if(i&&void 0!==i.vis)s=.5<=parseFloat(i.vis);else if(i){var o=Object.keys(i)[0],r=f[o]?c(i[o].message):null;if(r&&-1<f[o].indexOf(r.eventName)){var d=r.eventName;-1<n.indexOf(t)?(u(d,e),i[o]&&!i[o].id&&(i[o].id=location.pathname.split("/")[2]),"dleBroadcast"===o&&window.pulsembed&&window.pulsembed.sendBroadcast?window.pulsembed.sendBroadcast(JSON.stringify(i)):self!==top&&window.parent.postMessage(JSON.stringify(i),"*")):l&&l.contentWindow&&-1<p.indexOf(t)?-1==location.href.indexOf(i[o].id)&&(u(d,e),l.contentWindow.postMessage(JSON.stringify(i),"*")):-1===p.indexOf(i[o].id)&&-1===location.href.indexOf(i[o].id)&&u(d,e)}}}},!1),{send:function(e,t){var n=function(e,t){var n=null;for(var a in f)f[a]&&-1<f[a].indexOf(e)&&((n={})[a]={type:"video",message:JSON.stringify({eventName:e,params:t})});return n}(e,t);"undefined"!=typeof silentPlay&&!1!==o&&(o=""!==silentPlay.getPlayingType()&&silentPlay.isRunning()),!0!==s&&(a||o)||!n||(-1<f.dleBroadcast.indexOf(e)&&window.pulsembed&&window.pulsembed.sendBroadcast?window.pulsembed.sendBroadcast(JSON.stringify(n)):self!==top&&window.parent.postMessage(JSON.stringify(n),"*"))},on:function(e,t,n){if(e&&"function"==typeof t){var a={callback:t,expire:n};i[e]?i[e].push(a):i[e]=[a]}},off:function(e,t){if(e){var n=i[e];if(0<n.length)if("function"==typeof t)for(var a=0;a<n.length;a++)n[a]&&n[a].callback===t&&delete n[a];else void 0===t&&(i[e]=[])}},addIframe:function(e){"object"==typeof e&&"IFRAME"===e.tagName&&(l=e)},setParentUrl:function(e){/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(e)&&(p=e)},getEventParams:function(e){var t=c(e.data);return c(t.bookmarkletVideo.message)},events:f}),n=!1,v=!1,m=!1,y=[],h=[],g={context_player:!1,volume:0,ads:1,ht:!1,embedType:"externalVideo",autoplayRelated:1},b=!1,x="http://onet.tv/embed-context-player-poster.html?mvp=",E="http://onet.tv/embed-context-player-detail.html?mvp=",w="http://onet.tv/embed-playlist.html?uuid=",O="http://onet.tv/embed-external.html?mvp=",k="http://onet.tv/embed-external.html?mvp=1608420.480393434";"https:"===location.protocol&&(x=x.replace("http://","https://"),E=E.replace("http://","https://"),w=w.replace("http://","https://"),O=O.replace("http://","https://"),k=k.replace("http://","https://"));var N=function(){for(var e=document.getElementsByClassName("onettvEmbed notRendered"),t=0;t<e.length;t++)C(e[t]);n||(document.addEventListener("DOMContentLoaded",N),n=!0)},C=function(e){var t;e.className="onettvEmbed";var n=document.createElement("iframe"),a=document.createElement("div"),i={contener:a,iframe:n,domElement:e};a.className="onettvEmbedContener",a.style.position="relative",a.style.padding="56.25% 0 0px",a.style.height="0",n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="100%",n.style.height="100%",n.style.border="none",n.setAttribute("allowfullscreen",""),n.setAttribute("allow","autoplay"),a.appendChild(n),d.addIframe(n),r={mvp:e.getAttribute("data-mvp")},J()&&!D()?(r.mvp||(r={playlist:e.getAttribute("data-playlist")}),window.pulsembed.sendEmbedConfigQuery("OnettvVideo"),B(function(e){I(e,i)})):(r.mvp||(r={playlist:e.getAttribute("data-playlist")}),t=_(r),n.setAttribute("src",t),e.appendChild(a))},R=function(e,a){var i;i=b?E+e.mvp:A(e),M(function(e){var t=S(),n=P([{value:g.volume,key:"volume",prefix:"&"},{value:g.ads,key:"ads",prefix:"&"},{value:g.ht,key:"ht",prefix:"&"},{value:g.embedType,key:"et",prefix:"&"},{value:g.autoPlay,key:"autoPlay",prefix:"&"},{value:g.fc,key:"fc",prefix:"&"},{value:g.bitrate,key:"bitrate",prefix:"&"},{value:g.preset,key:"preset",prefix:"&"},{value:g.mvpVersion,key:"mvpVersion",prefix:"&"},{value:g.autoplayRelated,key:"autoplayRelated",prefix:"&"},{value:e.DV,key:"dv",prefix:"&"},{value:e.target,key:"target",prefix:"&"},{value:e.du,key:"du",prefix:"&"},{value:e.adbeta,key:"adbeta",prefix:"&"},{value:t,key:"context",prefix:"&"},{value:e.dr,key:"dr",prefix:"#"}]);!1!==g.context_player&&!0!==b||(i+="&"+n),a(i)})},_=function(e){var t=A(e),n=("undefined"!=typeof originalReferrer?originalReferrer:document.referrer)||location.href.replace(location.hash,"");return t+="&"+P([{value:n,key:"du",prefix:"&"}])},A=function(e){return g.context_player?x+e.mvp:e.playlist&&"undefined"!==e.playlist?w+e.playlist:e.mvp&&"undefined"!==e.mvp?O+e.mvp:k},P=function(e){for(var t="",n="",a=0;a<e.length;a++){var i=e[a];if(i.value&&""!==i.value||0==i.value){var o=i.key+"="+encodeURIComponent(i.value);"#"===i.prefix?(0<n.length&&(n+="&"),n+=o):"&"===i.prefix&&(0<t.length&&(t+="&"),t+=o)}}var r=t;return n&&(r+="#"+n),r},I=function(e,t){var n=L(e);n.embedUuid===r.mvp&&"expandWrapper"===n.message?(b=!0,R(r,function(e){window.pulsembed.sendExpand(e,"border: 0; position: fixed; z-index: 5000002; width: 100%; height: 100%; top:0; left: 0;")})):n.pulse2EmbedConfig?(g=F(n),R(r,function(e){t.iframe.setAttribute("src",e),g.context_player?(t.contener.style.position="static",t.contener.style.padding="0"):(0===g.fc&&(t.contener.style.padding="56.25% 0px 80px",window.pulsembed.sendHeight("80")),window.pulsembed.addClass("mvp-embed-wrapper")),t.domElement.appendChild(t.contener),V(function(e){T(e,t.iframe)})})):void 0!==n.adsAndStats?M(null,n):void 0!==n.vis&&V(function(e){T(e,t.iframe)},n)},L=function(t){var n;try{n=JSON.parse(t.data)}catch(e){n=t.data}return n},S=function(){return"undefined"!=typeof embedContext&&-1!==["INTEXT","MAIN_ELEMENT","GALLERY_ELEMENT"].indexOf(embedContext)?embedContext:"INTEXT"},M=function(e,t){if(v&&e)e(v);else if(t&&t.adsAndStats){v=t.adsAndStats;for(var n=0;n<y.length;n++)y[n](v);y=[]}else e&&y.push(e)},T=function(e,t){var n=JSON.stringify({vis:e});t&&t.contentWindow&&t.contentWindow.postMessage&&t.contentWindow.postMessage(n,"*"),t.onload=function(){T(e,t)}},V=function(e,t){if(t&&void 0!==t.vis){m=t.vis;for(var n=0;n<h.length;n++)h[n](m);e(m)}else m?e(m):h.push(e)},B=function(e){window.addEventListener?addEventListener("message",e,!1):attachEvent("onmessage",e)},J=function(){return-1<document.location.href.indexOf("pulsembed.eu")},D=function(){return-1<document.location.href.indexOf("#amp=1")},F=function(e){var t=window.location.pathname.split("/"),n=t[t.length-2];e.test&&(n=e.test);var a="";e.pulse2EmbedConfig&&e.pulse2EmbedConfig.config&&e.pulse2EmbedConfig.config.OnettvVideo&&(a=e.pulse2EmbedConfig.config.OnettvVideo);var i=["default",S()];a.hasOwnProperty(n)&&i.push(n);for(var o={},r=0;r<i.length;r++){var d=a[i[r]];if("object"==typeof d)for(var l in d)o[l]=d[l]}var s={context_player:!1,volume:0,ads:1,ht:!1,embedType:"externalVideo",autoPlay:null,fc:1,bitrate:null,preset:null,autoplayRelated:1};for(var l in s)void 0!==o[l]?s[l]=o[l]:"context_player"!==l&&void 0!==o.preset&&(s[l]=null);return s};return{init:N,embedInfoMsg:d}}();renderEmbeds.init();