var isOnetTv=function(){if(self===top&&-1!==window.location.host.indexOf("onet.tv"))return!0;if(self===top&&-1===window.location.host.indexOf("onet.tv"))return!1;try{return self!==top&&-1!==top.location.host.indexOf("onet.tv")}catch(e){return!1}return!1}(),Zepto=function(){function L(t){return null==t?String(t):j[S.call(t)]||"object"}function Z(t){return"function"==L(t)}function _(t){return null!=t&&t==t.window}function $(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return"object"==L(t)}function M(t){return D(t)&&!_(t)&&Object.getPrototypeOf(t)==Object.prototype}function R(t){return"number"==typeof t.length}function z(t){return 0<t.length?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function H(t,e){return"number"!=typeof e||c[F(t)]?e:e+"px"}function V(t){return"children"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function B(n,i,r){for(e in i)r&&(M(i[e])||A(i[e]))?(M(i[e])&&!M(n[e])&&(n[e]={}),A(i[e])&&!A(n[e])&&(n[e]=[]),B(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function U(t,e){return null==e?n(t):n(t).filter(e)}function J(t,e,n,i){return Z(e)?e.call(t,n,i):e}function X(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var i=e.className||"",r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function Y(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?n.parseJSON(t):t):t}catch(e){return t}}var t,e,n,i,C,N,r=[],o=r.slice,s=r.filter,a=window.document,u={},f={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],y=a.createElement("table"),x=a.createElement("tr"),b={tr:a.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:x,th:x,"*":a.createElement("div")},w=/complete|loaded|interactive/,E=/^[\w-]*$/,j={},S=j.toString,T={},O=a.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},A=Array.isArray||function(t){return t instanceof Array};return T.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=O).appendChild(t),i=~T.qsa(r,e).indexOf(t),o&&O.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},T.fragment=function(e,i,r){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,"<$1></$2>")),i===t&&(i=l.test(e)&&RegExp.$1),i in b||(i="*"),(f=b[i]).innerHTML=""+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),M(r)&&(u=n(s),n.each(r,function(t,e){-1<g.indexOf(t)?u[t](e):u.attr(t,e)})),s},T.Z=function(t,e){return(t=t||[]).__proto__=n.fn,t.selector=e||"",t},T.isZ=function(t){return t instanceof T.Z},T.init=function(e,i){var r;if(!e)return T.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&l.test(e))r=T.fragment(e,RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=T.qsa(a,e)}else{if(Z(e))return n(a).ready(e);if(T.isZ(e))return e;if(A(e))r=function(t){return s.call(t,function(t){return null!=t})}(e);else if(D(e))r=[e],e=null;else if(l.test(e))r=T.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=T.qsa(a,e)}}return T.Z(r,e)},(n=function(t,e){return T.init(t,e)}).extend=function(t){var e,n=o.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){B(t,n,e)}),t},T.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],s=i||r?e.slice(1):e,a=E.test(s);return $(t)&&a&&i?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=a.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},n.type=L,n.isFunction=Z,n.isWindow=_,n.isArray=A,n.isPlainObject=M,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.inArray=function(t,e,n){return r.indexOf.call(e,t,n)},n.camelCase=C,n.trim=function(t){return null==t?"":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var n,r,o,i=[];if(R(t))for(r=0;r<t.length;r++)null!=(n=e(t[r],r))&&i.push(n);else for(o in t)null!=(n=e(t[o],o))&&i.push(n);return z(i)},n.each=function(t,e){var n,i;if(R(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},n.grep=function(t,e){return s.call(t,e)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){j["[object "+e+"]"]=e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readyState)&&a.body?t(n):a.addEventListener("DOMContentLoaded",function(){t(n)},!1),this},get:function(e){return e===t?o.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return!1!==t.call(e,n,e)}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return T.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return 0<this.length&&T.matches(this[0],t)},not:function(e){var i=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r="string"==typeof e?this.filter(e):R(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return D(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!D(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!D(t)?t:n(t)},find:function(t){var i=this;return t?"object"==typeof t?n(t).filter(function(){var t=this;return r.some.call(i,function(e){return n.contains(e,t)})}):1==this.length?n(T.qsa(this[0],t)):this.map(function(){return T.qsa(this,t)}):n()},closest:function(t,e){var i=this[0],r=!1;for("object"==typeof t&&(r=n(t));i&&!(r?0<=r.indexOf(i):T.matches(i,t));)i=i!==e&&!$(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;0<i.length;)i=n.map(i,function(t){return(t=t.parentNode)&&!$(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return U(e,t)},parent:function(t){return U(N(this.pluck("parentNode")),t)},children:function(t){return U(this.map(function(){return V(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return U(this.map(function(t,e){return s.call(V(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var t,e,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),u[t]=n),u[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=Z(t);if(this[0]&&!e)var i=n(t).get(0),r=i.parentNode||1<this.length;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?"none"==i.css("display"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=J(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each(function(t){if(1===this.nodeType)if(D(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))}):this.length&&1===this[0].nodeType?!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:t},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){X(this,t)},this)})},prop:function(t,e){return t=P[t]||t,1 in arguments?this.each(function(n){this[t]=J(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(e,n){var i="data-"+e.replace(m,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?Y(r):t},val:function(t){return 0 in arguments?this.each(function(e){this.value=J(this,t,e,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r,o=this[0];if(!o)return;if(r=getComputedStyle(o,""),"string"==typeof t)return o.style[C(t)]||r.getPropertyValue(t);if(A(t)){var s={};return n.each(t,function(t,e){s[e]=o.style[C(e)]||r.getPropertyValue(e)}),s}}var a="";if("string"==L(t))i||0===i?a=F(t)+":"+H(t,i):this.each(function(){this.style.removeProperty(F(t))});else for(e in t)t[e]||0===t[e]?a+=F(e)+":"+H(e,t[e])+";":this.each(function(){this.style.removeProperty(F(e))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&r.some.call(this,function(t){return this.test(W(t))},q(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){i=[];var r=W(this);J(this,t,e,r).split(/\s+/g).forEach(function(t){n(this).hasClass(t)||i.push(t)},this),i.length&&W(this,r+(r?" ":"")+i.join(" "))}}):this},removeClass:function(e){return this.each(function(n){if("className"in this){if(e===t)return W(this,"");i=W(this),J(this,e,n,i).split(/\s+/g).forEach(function(t){i=i.replace(q(t)," ")}),W(this,i.trim())}})},toggleClass:function(e,i){return e?this.each(function(r){var o=n(this);J(this,e,r,W(this)).split(/\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n="scrollTop"in this[0];return e===t?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n="scrollLeft"in this[0];return e===t?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(n(t).css("margin-top"))||0,i.left-=parseFloat(n(t).css("margin-left"))||0,r.top+=parseFloat(n(e[0]).css("border-top-width"))||0,r.left+=parseFloat(n(e[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||a.body;t&&!d.test(t.nodeName)&&"static"==n(t).css("position");)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(e){var i=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(r){var o,s=this[0];return r===t?_(s)?s["inner"+i]:$(s)?s.documentElement["scroll"+i]:(o=this.offset())&&o[e]:this.each(function(t){(s=n(this)).css(e,J(this,r,t,s[e]()))})}}),["after","prepend","before","append"].forEach(function(t,e){var i=e%2;n.fn[t]=function(){var t,o,r=n.map(arguments,function(e){return"object"==(t=L(e))||"array"==t||null==e?e:T.fragment(e)}),s=1<this.length;return r.length<1?this:this.each(function(t,u){o=i?u:u.parentNode,u=0==e?u.nextSibling:1==e?u.firstChild:2==e?u:null;var f=n.contains(a.documentElement,o);r.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!o)return n(t).remove();o.insertBefore(t,u),f&&function G(t,e){e(t);for(var n=0,i=t.childNodes.length;n<i;n++)G(t.childNodes[n],e)}(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+"To":"insert"+(e?"Before":"After")]=function(e){return n(e)[t](this),this}}),T.Z.prototype=n.fn,T.uniq=N,T.deserializeValue=Y,n.zepto=T,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function l(t){return t._zid||(t._zid=e++)}function h(t,e,n,i){if((e=p(e)).ns)var r=function(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}(e.ns);return(s[l(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&l(t.fn)!==l(n)||i&&t.sel!=i)})}function p(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,i,r,o,a,u,f){var h=l(e),d=s[h]||(s[h]=[]);i.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(r);var s=p(i);s.fn=r,s.sel=a,s.e in c&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void 0});var l=(s.del=u)||r;s.proxy=function(t){if(!(t=j(t)).isImmediatePropagationStopped()){t.data=o;var i=l.apply(e,t._args==n?[t]:[t].concat(t._args));return!1===i&&(t.preventDefault(),t.stopPropagation()),i}},s.i=d.length,d.push(s),"addEventListener"in e&&e.addEventListener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,i,r){var o=l(t);(e||"").split(/\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete s[o][e.i],"removeEventListener"in t&&t.removeEventListener(g(e.e),e.proxy,m(e,r))})})}function j(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(E,function(t,n){var r=i[t];e[t]=function(){return this[n]=x,r&&r.apply(i,arguments)},e[n]=b}),(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function S(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===n||(i[e]=t[e]);return j(i,t)}var n,e=1,i=Array.prototype.slice,r=t.isFunction,o=function(t){return"string"==typeof t},s={},a={},u="onfocusin"in window,f={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",t.event={add:v,remove:y},t.proxy=function(e,n){var s=2 in arguments&&i.call(arguments,2);if(r(e)){var a=function(){return e.apply(n,s?s.concat(i.call(arguments)):arguments)};return a._zid=l(e),a}if(o(n))return s?(s.unshift(e[n],e),t.proxy.apply(null,s)):t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,s,a,u,f){var c,l,h=this;return e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||r(u)||!1===u||(u=a,a=s,s=n),(r(a)||!1===a)&&(u=a,a=n),!1===u&&(u=b),h.each(function(n,r){f&&(c=function(t){return y(r,t.type,u),u.apply(this,arguments)}),s&&(l=function(e){var n,o=t(e.target).closest(s,r).get(0);return o&&o!==r?(n=t.extend(S(e),{currentTarget:o,liveFired:r}),(c||u).apply(o,[n].concat(i.call(arguments,1)))):void 0}),v(r,e,u,a,s,l||c)}))},t.fn.off=function(e,i,s){var a=this;return e&&!o(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(o(i)||r(s)||!1===s||(s=i,i=n),!1===s&&(s=b),a.each(function(){y(this,e,s,i)}))},t.fn.trigger=function(e,n){return(e=o(e)||t.isPlainObject(e)?t.Event(e):j(e))._args=n,this.each(function(){e.type in f&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var i,r;return this.each(function(s,a){(i=S(o(e)?t.Event(e):e))._args=n,i.target=a,t.each(h(a,e.type||e),function(t,e){return r=e.proxy(i),!i.isImmediatePropagationStopped()&&void 0})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){o(t)||(t=(e=t).type);var n=document.createEvent(a[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),j(n)}}(Zepto),function(t){function h(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function p(t,e,i,r){return t.global?h(e||n,i,r):void 0}function d(e){e.global&&0==t.active++&&p(e,null,"ajaxStart")}function m(e){e.global&&!--t.active&&p(e,null,"ajaxStop")}function g(t,e){var n=e.context;return!1!==e.beforeSend.call(n,t,e)&&!1!==p(e,n,"ajaxBeforeSend",[t,e])&&void p(e,n,"ajaxSend",[t,e])}function v(t,e,n,i){var r=n.context,o="success";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),p(n,r,"ajaxSuccess",[e,n,t]),x(o,e,n)}function y(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),p(i,o,"ajaxError",[n,i,t||e]),x(e,n,i)}function x(t,e,n){var i=n.context;n.complete.call(i,e,t),p(n,i,"ajaxComplete",[e,n]),m(n)}function b(){}function w(t){return t&&(t=t.split(";",2)[0]),t&&(t==f?"html":t==u?"json":s.test(t)?"script":a.test(t)&&"xml")||"text"}function E(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function S(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}var i,r,e=0,n=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,u="application/json",f="text/html",c=/^\s*$/,l=n.createElement("a");l.href=window.location.href,t.active=0,t.ajaxJSONP=function(i,r){if(!("type"in i))return t.ajax(i);var f,h,o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||"jsonp"+ ++e,a=n.createElement("script"),u=window[s],c=function(e){t(a).triggerHandler("error",e||"abort")},l={abort:c};return r&&r.promise(l),t(a).on("load error",function(e,n){clearTimeout(h),t(a).off().remove(),"error"!=e.type&&f?v(f[0],l,i,r):y(null,n||"error",l,i,r),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),!1===g(l,i)?c("abort"):(window[s]=function(){f=arguments},a.src=i.url.replace(/\?(.+)=\?/,"?$1="+s),n.head.appendChild(a),0<i.timeout&&(h=setTimeout(function(){c("timeout")},i.timeout))),l},t.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:f,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var a,o=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===o[i]&&(o[i]=t.ajaxSettings[i]);d(o),o.crossDomain||((a=n.createElement("a")).href=o.url,a.href=a.href,o.crossDomain=l.protocol+"//"+l.host!=a.protocol+"//"+a.host),o.url||(o.url=window.location.toString()),function(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=E(e.url,e.data),e.data=void 0)}(o);var u=o.dataType,f=/\?.+=\?/.test(o.url);if(f&&(u="jsonp"),!1!==o.cache&&(e&&!0===e.cache||"script"!=u&&"jsonp"!=u)||(o.url=E(o.url,"_="+Date.now())),"jsonp"==u)return f||(o.url=E(o.url,o.jsonp?o.jsonp+"=?":!1===o.jsonp?"":"callback=?")),t.ajaxJSONP(o,s);var C,h=o.accepts[u],p={},m=function(t,e){p[t.toLowerCase()]=[t,e]},x=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,S=o.xhr(),T=S.setRequestHeader;if(s&&s.promise(S),o.crossDomain||m("X-Requested-With","XMLHttpRequest"),m("Accept",h||"*/*"),(h=o.mimeType||h)&&(-1<h.indexOf(",")&&(h=h.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(h)),(o.contentType||!1!==o.contentType&&o.data&&"GET"!=o.type.toUpperCase())&&m("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(r in o.headers)m(r,o.headers[r]);if(S.setRequestHeader=m,!(S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=b,clearTimeout(C);var e,n=!1;if(200<=S.status&&S.status<300||304==S.status||0==S.status&&"file:"==x){u=u||w(o.mimeType||S.getResponseHeader("content-type")),e=S.responseText;try{"script"==u?eval(e):"xml"==u?e=S.responseXML:"json"==u&&(e=c.test(e)?null:t.parseJSON(e))}catch(i){n=i}n?y(n,"parsererror",S,o,s):v(e,S,o,s)}else y(S.statusText||null,S.status?"error":"abort",S,o,s)}})===g(S,o))return S.abort(),y(null,"abort",S,o,s),S;if(o.xhrFields)for(r in o.xhrFields)S[r]=o.xhrFields[r];var N=!("async"in o)||o.async;for(r in S.open(o.type,o.url,N,o.username,o.password),p)T.apply(S,p[r]);return 0<o.timeout&&(C=setTimeout(function(){S.onreadystatechange=b,S.abort(),y(null,"timeout",S,o,s)},o.timeout)),S.send(o.data?o.data:null),S},t.get=function(){return t.ajax(S.apply(null,arguments))},t.post=function(){var e=S.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=S.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var a,r=this,s=e.split(/\s/),u=S(e,n,i),f=u.success;return 1<s.length&&(u.url=s[0],a=s[1]),u.success=function(e){r.html(a?t("<div>").html(e.replace(o,"")).find(a):e),f&&f.apply(r,arguments)},t.ajax(u),this};var T=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(T(e)+"="+T(n))},function C(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+"["+(a||"object"==o||"array"==o?n:"")+"]"),!r&&s?e.add(u.name,u.value):"array"==o||!i&&"object"==o?C(e,u,i,n):e.add(n,u)})}(i,e,n),i.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){return t.forEach?t.forEach(r):void i.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(i,o){n=o.type,(e=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&r(t(o).val())}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);var oldLoad=$.fn.load;$.fn.load=function(a,b,c){"function"==typeof a?$(window).on("load",a):oldLoad(a,b,c)},function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;u<i;u++)if(t.call(e,n[u],u,n)===r)return}else{var a=j.keys(n);for(u=0,i=a.length;u<i;u++)if(t.call(e,n[a[u]],a[u],n)===r)return}return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=2<arguments.length;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=2<arguments.length;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null!=n&&(y&&n.indexOf===y?-1!=n.indexOf(t):k(n,function(n){return n===t}))},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,u=-1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u<o&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o<u&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(e<r||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){for(var u=(r=E(r)).call(e,t),i=0,a=n.length;i<a;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:t<0?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;r<n;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return n[e=j.sortedIndex(n,t)]===t?e:-1;e=r<0?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;e<u;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);u<e;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;u<i;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=!1===r.leading?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||!1!==r.leading||(o=l);var f=t-(l-o);return e=this,u=arguments,f<=0?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||!1===r.trailing||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;l<t?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r||(r=!0,t=n.apply(this,arguments),n=null),t}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;0<=r;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(f=(c=n.length)==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return void 0===n},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;u<n;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null!=n){var r=n[t];return j.isFunction(r)?r.call(n):r}},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,r,s){t.Backbone=e(t,s,i,r)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,r){var s=t.Backbone,n=[],o=n.slice;e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this})),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var s=this,n=i.once(function(){s.off(t,n),e.apply(this,arguments)});return n._callback=e,this.on(t,n,r)},off:function(t,e,r){var s,n,a,o,h,u,l,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(h=0,u=(o=t?[t]:i.keys(this._events)).length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||r)for(l=0,f=a.length;l<f;l++)n=a[l],(e&&e!==n.callback&&e!==n.callback._callback||r&&r!==n.context)&&s.push(n);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;return i&&f(i,e),r&&f(r,arguments),this},stopListening:function(t,e,r){var s=this._listeningTo;if(!s)return this;var n=!e&&!r;for(var a in r||"object"!=typeof e||(r=this),t&&((s={})[t._listenId]=t),s)(t=s[a]).off(e,r,this),(n||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(t,e,i,r){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(r));return!1}if(l.test(i)){for(var n=i.split(l),a=0,o=n.length;a<o;a++)t[e].apply(t,[n[a]].concat(r));return!1}return!0},f=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++r<s;)(i=t[r]).callback.call(i.ctx);return;case 1:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n);return;case 2:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n,a,o);return;default:for(;++r<s;)(i=t[r]).callback.apply(i.ctx,e);return}};i.each({listenTo:"on",listenToOnce:"once"},function(t,e){u[e]=function(e,r,s){var n=this._listeningTo||(this._listeningTo={});return s||"object"!=typeof r||(s=this),(n[e._listenId||(e._listenId=i.uniqueId("l"))]=e)[t](r,s,this),this}}),u.bind=u.on,u.unbind=u.off,i.extend(e,u);var p=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=i.defaults({},r,i.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var s,n,a,o,h,u,l,c;if(null==t)return this;if("object"==typeof t?(n=t,r=e):(n={})[t]=e,r||(r={}),!this._validate(n,r))return!1;for(s in a=r.unset,h=r.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in n&&(this.id=n[this.idAttribute]),n)e=n[s],i.isEqual(c[s],e)||o.push(s),i.isEqual(l[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete c[s]:c[s]=e;if(!h){o.length&&(this._pending=r);for(var f=0,d=o.length;f<d;f++)this.trigger("change:"+o[f],this,c[o[f]],r)}if(u)return this;if(!h)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,r=!1,s=this._changing?this._previousAttributes:this.attributes;for(var n in t)i.isEqual(s[n],e=t[n])||((r||(r={}))[n]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?i.clone(t):{}).parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;r&&r(e,i,t),e.trigger("sync",e,i,t)},q(this,t),this.sync("read",this,t)},save:function(t,e,r){var s,n,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,r=e):(s={})[t]=e,r=i.extend({validate:!0},r),s&&!r.wait){if(!this.set(s,r))return!1}else if(!this._validate(s,r))return!1;s&&r.wait&&(this.attributes=i.extend({},o,s)),void 0===r.parse&&(r.parse=!0);var h=this,u=r.success;return r.success=function(t){h.attributes=o;var e=h.parse(t,r);if(r.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,r))return!1;u&&u(h,t,r),h.trigger("sync",h,t,r)},q(this,r),"patch"===(n=this.isNew()?"create":r.patch?"patch":"update")&&(r.attrs=s),a=this.sync(n,this,r),s&&r.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,r=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),r&&r(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;q(this,t);var n=this.sync("delete",this,t);return t.wait||s(),n},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||M();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger("invalid",this,r,i.extend(e,{validationError:r})),!1)}});i.each(["keys","values","pairs","invert","pick","omit"],function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var g=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};i.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,y))},remove:function(t,e){var s,n,a,o,r=!i.isArray(t);for(e||(e={}),s=0,n=(t=r?[t]:i.clone(t)).length;s<n;s++)(o=t[s]=this.get(t[s]))&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return r?t[0]:t},set:function(t,e){(e=i.defaults({},e,m)).parse&&(t=this.parse(t,e));var s,n,a,o,h,u,l,r=!i.isArray(t);t=r?t?[t]:[]:i.clone(t);var c=e.at,f=this.model,d=this.comparator&&null==c&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null,g=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(d||!b||!x)&&[];for(s=0,n=t.length;s<n;s++){if(a=(h=t[s]||{})instanceof p?o=h:h[f.prototype.idAttribute||"id"],u=this.get(a))x&&(_[u.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=u.parse(h,e)),u.set(h,e),d&&!l&&u.hasChanged(v)&&(l=!0)),t[s]=u;else if(b){if(!(o=t[s]=this._prepareModel(h,e)))continue;g.push(o),this._addReference(o,e)}o=u||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,n=this.length;s<n;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(g.length||E&&E.length)if(d&&(l=!0),this.length+=g.length,null!=c)for(s=0,n=g.length;s<n;s++)this.models.splice(c+s,0,g[s]);else{E&&(this.models.length=0);var k=E||g;for(s=0,n=k.length;s<n;s++)this.models.push(k[s])}if(l&&this.sort({silent:!0}),!e.silent){for(s=0,n=g.length;s<n;s++)(o=g[s]).trigger("add",o,this,e);(l||E&&E.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,s=this.models.length;r<s;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){void 0===(t=t?i.clone(t):{}).parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(i){var s=t.reset?"reset":"set";r[s](i,t),e&&e(r,i,t),r.trigger("sync",r,i,t)},q(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,s=e.success;return e.success=function(t,i){e.wait&&r.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;var r=new(((e=e?i.clone(e):{}).collection=this).model)(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t,e){null!=(this._byId[t.cid]=t).id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});i.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(t){g.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});i.each(["groupBy","countBy","sortBy","indexBy"],function(t){g.prototype[t]=function(e,r){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,r)}});var w=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(i.isFunction(r)||(r=this[t[e]]),r){var s=e.match(x),n=s[1],a=s[2];r=i.bind(r,this),n+=".delegateEvents"+this.cid,""===a?this.$el.on(n,r):this.$el.on(n,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var r=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,s){var n=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:n,dataType:"json"};if(s.url||(a.url=i.result(r,"url")||M()),null!=s.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||r.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){a.type="POST",s.emulateJSON&&(a.data._method=n);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&k&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return r.trigger("request",r,h,s),h};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,H=/(\(\?)?:\w+/g,A=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(r)&&(s=r,r=""),s||(s=this[r]);var n=this;return e.history.route(t,function(i){var a=n._extractParameters(t,i);n.execute(s,a),n.trigger.apply(n,["route:"+r].concat(a)),n.trigger("route",r,a),e.history.trigger("route",n,r,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(I,"\\$&").replace(S,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,P=/msie [\w.]+/,C=/\/$/,j=/#.*$/;N.started=!1,i.extend(N.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(C,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(R,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),s=document.documentMode,n=P.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(O,"/"),n&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!N.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(j,""),this.fragment!==t){if(""===(this.fragment=t)&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new N;p.extend=g.extend=$.extend=w.extend=N.extend=function(t,e){var s,r=this;s=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(s,r,e);var n=function(){this.constructor=s};return n.prototype=r.prototype,s.prototype=new n,t&&i.extend(s.prototype,t),s.__super__=r.prototype,s};var M=function(){throw new Error('A "url" property or function must be specified')},q=function(t,e){var i=e.error;e.error=function(r){i&&i(t,r,e),t.trigger("error",t,r,e)}};return e});var appEvents={};_.extend(appEvents,Backbone.Events),appEvents.PLAY_NEXT="player_play_next",appEvents.CHANGE_RELOAD_MODE="change_reload_mode",appEvents.PLAY_CLIP_ON_URL="play_clip_on_url",appEvents.PLAY_CLIP_ON_MVP="play_clip_on_mvp",appEvents.SET_NEW_URL="set_new_ulr",appEvents.NEXT_CLIP_INFO="next_clip_info",appEvents.PLAYER_READY="player_ready",appEvents.PLAYER_ERROR="player_error",appEvents.KEEP_PLAYING="keep_playint",appEvents.PLAYER_START="player_start",appEvents.PLAYER_PAUSED="player_paused",appEvents.PLAYER_RESUME="player_resume",appEvents.AD_PLAY="ad_play",appEvents.AD_STOP="ad_stop",appEvents.ON_PLAYER_CLICK="on_player_click";var mvp=mvp||{},silentPlay={_isActive:!(mvp.ready=function(facade){if((/cloudint.onet/.test(document.location.host)||/dev.onet/.test(document.location.host))&&(mvp.PlaylistProxy.CKM_URL="http://rtxint.c1r1.onet?host-header=qi.ckm.onetapi.pl"),mvp.LocalMediator=function(){this.Extends=mvp.Mediator,this.initialize=function(){this.parent(mvp.LocalMediator.NAME)},mvp.mvpPlayerError=!1,this.mvpPlayerErrorEvent=function(eventName,data,msg){mvp.mvpPlayerError=!0,appEvents.trigger(eventName,data,msg),void 0!==embedInfoMsg&&embedInfoMsg.send("PLAYER_ERROR")},this.handleNotification=function(notification){switch(notification.getName()){case mvp.PlaylistProxy.LOAD:appEvents.trigger(appEvents.PLAYER_READY);break;case mvp.PlayerFacade.PLAY_NEXT:mvp.mvpPlayerError?mvp.mvpPlayerError=!1:notification.body.related||appEvents.trigger(appEvents.PLAY_NEXT,notification.body);break;case mvp.VideoScreenMediator.FULL_SCREEN_CHANGE:notification.body.fullScreen?appEvents.trigger(appEvents.CHANGE_RELOAD_MODE,"allButUrl"):window.mvp.PlayerFacade.getInstance().sendNotification(window.mvp.PlayerFacade.GET_TIME,{callback:function(time){var currentPlayertime=Math.floor(time/60)+":"+Math.floor(time%60);appEvents.trigger(appEvents.CHANGE_RELOAD_MODE,"all","#play:"+currentPlayertime)},id:nextClipManager.getCurrentMvpId()});break;case mvp.PlaylistProxy.CKM_DATA_ACQUIRED:void 0!==notification.body.geoIp&&!1===notification.body.geoIp&&this.mvpPlayerErrorEvent(appEvents.PLAYER_ERROR,notification.body,"infoGeo");break;case mvp.PlaylistMediator.SOFT_STRATEGY_ERROR:case mvp.PlaylistMediator.NO_STRATEGY:this.mvpPlayerErrorEvent(appEvents.PLAYER_ERROR,notification.body,"infoDevice");break;case mvp.VideoEvent.KEEP:"playing"===notification.body.data.playstate&&window.mvp.PlayerFacade.getInstance().sendNotification(window.mvp.PlayerFacade.GET_TIME,{callback:function(time){appEvents.trigger(appEvents.KEEP_PLAYING,time)},id:nextClipManager.getCurrentMvpId()});break;case mvp.ControlsMediator.Notifications.CLICKED:case mvp.VideoScreenMediator.SCREEN_CLICK:setTimeout(function(){window.mvp.PlayerFacade.getInstance().sendNotification(window.mvp.PlayerFacade.GET_TIME,{callback:function(time){appEvents.trigger(appEvents.ON_PLAYER_CLICK,time)},id:nextClipManager.getCurrentMvpId()})},100);break;case mvp.ControlsMediator.Notifications.USER_VOLUME_CHANGE:void 0!==silentPlay&&silentPlay.setRunning&&(silentPlay.setRunning(!1),void 0!==embedInfoMsg&&embedInfoMsg.send("ALL_PLAYER_STOP")),appEvents.trigger(appEvents.ON_PLAYER_CLICK);break;case mvp.VideoEvent.START:appEvents.trigger(appEvents.PLAYER_START),void 0!==embedInfoMsg&&(embedInfoMsg.send("ALL_PLAYER_STOP"),embedInfoMsg.on("ALL_PLAYER_STOP",function(){mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PAUSE,{id:$(".mvp").attr("id")})},!1));break;case mvp.VideoEvent.PAUSED:appEvents.trigger(appEvents.PLAYER_PAUSED);break;case mvp.VideoEvent.PLAYING:appEvents.trigger(appEvents.PLAYER_RESUME),void 0!==embedInfoMsg&&embedInfoMsg.send("ALL_PLAYER_STOP");break;case mvp.VideoEvent.STOP:void 0!==embedInfoMsg&&embedInfoMsg.send("PLAYING_END");break;case mvp.VideoEvent.AD_PLAY:appEvents.trigger(appEvents.AD_PLAY);break;case mvp.VideoEvent.AD_STOP:appEvents.trigger(appEvents.AD_STOP)}},this.listNotificationInterests=function(){return[mvp.VideoEvent.AD_PLAY,mvp.VideoEvent.AD_STOP,mvp.VideoEvent.START,mvp.VideoEvent.PAUSED,mvp.VideoEvent.PLAYING,mvp.VideoEvent.STOP,mvp.PlayerFacade.PLAY_NEXT,mvp.VideoScreenMediator.FULL_SCREEN_CHANGE,mvp.PlaylistProxy.LOAD,mvp.PlaylistProxy.CKM_DATA_ACQUIRED,mvp.PlaylistMediator.NO_STRATEGY,mvp.PlaylistMediator.SOFT_STRATEGY_ERROR,mvp.VideoEvent.KEEP,mvp.ControlsMediator.Notifications.CLICKED,mvp.VideoScreenMediator.SCREEN_CLICK,mvp.ControlsMediator.Notifications.USER_VOLUME_CHANGE]}},mvp.LocalMediator=new mvp.Class(new mvp.LocalMediator),mvp.LocalMediator.NAME="mvp_LocalMediator",!facade.hasMediator(mvp.LocalMediator.NAME)){var localMediator=new mvp.LocalMediator;facade.registerMediator(localMediator)}}),_isWorking:!1,_isRunning:!1,_playerIsReady:!1,_playingType:"",_host:"",_validHosts:/(.*).onet.pl/,isWorking:function(){return this._isWorking},setRunning:function(value){this._isRunning=value},isRunning:function(){return this._isRunning},setHost:function(host){this._host=decodeURIComponent(host)},setPlayingType:function(){this._isHostValid()?this._playingType="delayed":this._playingType="silent"},getPlayingType:function(){return this._playingType},init:function(percent){if(void 0!==percent){var that=this;this._isWorking=!0,appEvents.on(appEvents.PLAYER_READY,function(){that._playerIsReady=!0});var addEvent,eventName,randomDecisionresult=this._getRandomDecision(percent);randomDecisionresult&&(this._isActive=!0),gracePeriodManager.getAvgTime()<5?randomDecisionresult?$(function(){dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"SilentPlay",gaEventAction:"positiveResult",gaEventLabel:"1"})}):$(function(){dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"SilentPlay",gaEventAction:"negativeResult",gaEventLabel:"0"})}):$(function(){dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"SilentPlay",gaEventAction:"outOfDecision",gaEventLabel:gracePeriodManager.getAvgTime()})}),eventName=window.attachEvent?(addEvent=window.attachEvent,"onmessage"):(addEvent=window.addEventListener,"message");var started=!1,paused=!1;appEvents.on(appEvents.ON_PLAYER_CLICK,function(){that._blockSilentPlayInOthersPlayers()}),addEvent(eventName,function(event){"IsManagerShouldWork?"===event.data&&that._isActive&&window.parent.postMessage("ManagerShouldWork","*");var afterPlayerReady=function(){"silentPlay"===event.data&&(that.setRunning(!0),started||(visibilityDetector.watchTabVisibility(that._startMvpPlayer),started=!0),paused&&(mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.RESUME,{id:$(".mvp").attr("id")}),paused=!1)),started&&!paused&&"stopPlayingNotVisible"===event.data&&"delayed"===that._playingType&&(mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PAUSE,{id:$(".mvp").attr("id")}),paused=!0),started&&!paused&&"stopPlaying"===event.data&&(mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PAUSE,{id:$(".mvp").attr("id")}),paused=!0)};that._playerIsReady?afterPlayerReady():appEvents.on(appEvents.PLAYER_READY,function(){afterPlayerReady()})},!1)}},_startMvpPlayer:function(){"delayed"===this._playingType?mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.DELAYED_START,{id:$(".mvp").attr("id"),offset:0,time:1e3}):mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PLAY,{id:$(".mvp").attr("id"),offset:0,silentMode:!0})},_blockSilentPlayInOthersPlayers:function(){"silent"===this._playingType&&window.parent.postMessage("ManagerShouldStop","*")},_getRandomDecision:function(percent){return Math.random()<percent/100},_isHostValid:function(){return null!==this._host.match(new RegExp(this._validHosts))}},clipListManager={_clips:!1,_mvpIds:!1,permanentList:!0,setClips:function(clips,mainChannel){this.clearList(),this.addClips(clips,mainChannel)},getClipByIndex:function(index){return this._getClips()[this._getMvpIds()[index]]},getNextClipByMvpId:function(MvpId){var nexMvpIdIndex=_.indexOf(this._getMvpIds(),MvpId)+1;return void 0!==this._getMvpIds()[nexMvpIdIndex]&&this._getClips()[this._getMvpIds()[nexMvpIdIndex]]},getClipByURL:function(url){var currentClips=this._getClips();for(var i in currentClips)if(currentClips[i].url==="http://"+url)return currentClips[i];return!1},addClips:function(clips,mainChannel){var currentClips=this._getClips(),currentMvpIds=this._getMvpIds();for(var i in clips)clips.hasOwnProperty(i)&&(currentMvpIds.push(clips[i].ckmId),currentClips[clips[i].ckmId]={channel:mainChannel||clips[i].channel,mvpId:clips[i].ckmId,title:clips[i].title,duration:clips[i].duration,url:"http://"+clips[i].url},void 0!==clips[i].image&&(currentClips[clips[i].ckmId].image=clips[i].image),void 0!==clips[i].id&&(currentClips[clips[i].ckmId].uuid=clips[i].id),void 0!==clips[i].uuid&&(currentClips[clips[i].ckmId].uuid=clips[i].uuid));this._saveClips(currentClips),this._saveMvpIds(currentMvpIds)},clearList:function(){this._saveClips({}),this._saveMvpIds([])},getClipByMvpId:function(MvpId){return this._getClips()[MvpId]},isClipOnList:function(clip){if(void 0===this.getClipByIndex(0)||this.getClipByIndex(0).channel!==clip.channel)return!1;var currentClips=this._getClips();for(var i in currentClips)if(currentClips[i].uuid===clip.uuid){var MvpIds=this._getMvpIds();return MvpIds[_.indexOf(MvpIds,i)]=clip.ckmId,currentClips[clip.ckmId]=JSON.parse(JSON.stringify(currentClips[i])),currentClips[clip.ckmId].mvpId=clip.ckmId,currentClips[clip.ckmId].title=clip.title,clip.ckmId!==i&&delete currentClips[i],this._saveClips(currentClips),this._saveMvpIds(MvpIds),!0}return!1},_saveClips:function(clips){if(this._clips=clips,this.permanentList)try{localStorage.setItem("clips_nextVideo",JSON.stringify(this._clips)),localStorage.setItem("clips_nextVideo_ttl",Date.now())}catch(e){}},_saveMvpIds:function(MvpIds){if(this._mvpIds=MvpIds,this.permanentList)try{localStorage.setItem("MvpIds_nextVideo",JSON.stringify(this._mvpIds))}catch(e){}},_getClips:function(){if(this._clips)return this._clips;var clipsFromLS=JSON.parse(localStorage.getItem("clips_nextVideo")),clipsFromLSTTL=parseInt(localStorage.getItem("clips_nextVideo_ttl")?localStorage.getItem("clips_nextVideo_ttl"):0);return clipsFromLS&&clipsFromLSTTL+6e5>Date.now()&&0!==clipsFromLSTTL?this._clips=clipsFromLS:{}},_getMvpIds:function(){if(this._mvpIds)return this._mvpIds;var MvpIdsFromLS=JSON.parse(localStorage.getItem("MvpIds_nextVideo"));return MvpIdsFromLS?this._mvpIds=MvpIdsFromLS:[]}},nextClipManager={embedExternal:!1,embed:!1,playRelated:!0,hiddenUrl:!1,hideVideoTitle:!1,_currentClipMvpId:!1,_primaryMvpId:0,_playlistUuid:!1,_allowErrorInfo:!0,_mvpIdForGetNextQuery:!1,_offset:0,_limit:20,_maxGetNextReqestAtempt:2,setAutonextMode:function(currentClip,mvpIdForGetNextQuery){if(void 0!==mvpIdForGetNextQuery&&(this._mvpIdForGetNextQuery=mvpIdForGetNextQuery),this._init(),currentClip.id=currentClip.uuid,this._currentClipMvpId=currentClip.ckmId,this._primaryMvpId=currentClip.ckmId,clipListManager.isClipOnList(currentClip)||clipListManager.setClips([currentClip]),this.playRelated){var error=!1,that=this;appEvents.listenToOnce(appEvents,appEvents.PLAYER_ERROR,function(){error=!0}),appEvents.listenToOnce(appEvents,appEvents.PLAYER_READY,function(){error||that._triggerNextClipInfo()})}},setPlayListMode:function(list,playlistUUid){this._init(),currentClip.id=currentClip.uuid,this._currentClipMvpId=currentClip.ckmId,this._playlistUuid=playlistUUid,clipListManager.permanentList=!1,clipListManager.setClips([currentClip]),this._offset=1,this._triggerNextClipInfo()},getCurrentMvpId:function(){return this._currentClipMvpId},_init:function(){var that=this;appEvents.on(appEvents.PLAY_NEXT,function(notification){that._currentClipMvpId=notification.nextId;var nextClip=clipListManager.getClipByMvpId(notification.nextId);appEvents.trigger(appEvents.PLAY_CLIP_ON_URL,nextClip.url),that._triggerNextClipInfo()}),appEvents.on(appEvents.PLAYER_READY,function(){var currentClip=clipListManager.getClipByMvpId(that._currentClipMvpId),notification={id:$(".mvp").first().attr("id"),title:currentClip.title,titleHref:"",logo:"",logoHref:""};!that.hiddenUrl&&-1===location.href.indexOf("onet.tv/embed-video.html")&&-1===location.href.indexOf("onet.tv/embed-detail.html")&&that.embed&&"http://"!==currentClip.url&&(notification.titleHref=currentClip.url),that.hideVideoTitle||mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.SET_TITLE_AND_LOGO,notification)}),appEvents.on(appEvents.SET_NEW_URL,function(url){var newClip=clipListManager.getClipByURL(url);if(newClip){var oldMvp=that._currentClipMvpId;that._currentClipMvpId=newClip.mvpId,appEvents.trigger(appEvents.PLAY_CLIP_ON_MVP,{oldMvp:oldMvp,newMvp:newClip.mvpId}),that._triggerNextClipInfo()}}),appEvents.on(appEvents.PLAYER_ERROR,function(notification,type){if(that._allowErrorInfo){var errorMvpId;switch(that._allowErrorInfo=!1,type){case"infoDevice":errorMvpId="mvp:328353.1406237001";break;case"infoGeo":errorMvpId="mvp:1608421.1925642394",localStorage.removeItem("deviceConfig");break;case"missing":errorMvpId="mvp:1608420.480393434";break;default:return}appEvents.listenToOnce(appEvents,appEvents.PLAYER_READY,function(){that._allowErrorInfo=!0,appEvents.listenToOnce(appEvents,appEvents.NEXT_CLIP_INFO,function(){var nextClip=clipListManager.getNextClipByMvpId(that._currentClipMvpId);appEvents.trigger(appEvents.PLAY_NEXT,{nextId:nextClip.mvpId})}),that._triggerNextClipInfo({mvpId:that._currentClipMvpId})}),mvp.mvpPlayerError=!0,appEvents.trigger(appEvents.PLAY_CLIP_ON_MVP,{oldMvp:that._currentClipMvpId,newMvp:errorMvpId})}})},_triggerNextClipInfo:function(currentClip){var nextClip=clipListManager.getNextClipByMvpId(this._currentClipMvpId),currentMvpId=currentClip?currentClip.mvpId:this._currentClipMvpId;if(nextClip)appEvents.trigger(appEvents.NEXT_CLIP_INFO,{currentMvp:currentMvpId,nextClip:nextClip});else{var that=this;this._getClips(function(){that._triggerNextClipInfo(currentClip)})}},_getClips:function(callback,atemptCount){var that=this;DeviceInfo.getDeviceConfig(function(deviceConfig){var dataParams={offset:that._offset,limit:that._limit,deviceConfig:JSON.stringify(deviceConfig)};!0===that.embedExternal&&(dataParams.embedExternal=1);var mainChannel=!1;if(0!==that._primaryMvpId){var primaryClip=clipListManager.getClipByMvpId(that._primaryMvpId);dataParams.mvpId=primaryClip.mvpId.replace("mvp:",""),""!==primaryClip.channel&&(dataParams.channel=primaryClip.channel),mainChannel=primaryClip.channel}that._mvpIdForGetNextQuery&&(dataParams.mvpId=that._mvpIdForGetNextQuery),that._playlistUuid&&(dataParams.playListUuid=that._playlistUuid),$.ajax({url:"/_a/get-nextclips.json",data:dataParams,dataType:"json",success:function(json){clipListManager.addClips(json.data,mainChannel),that._offset=that._offset+json.data.length,callback&&0<json.data.length&&callback()},error:function(){void 0===atemptCount?atemptCount=that._maxGetNextReqestAtempt-1:atemptCount-=1,0!==atemptCount&&setTimeout(function(){that._getClips(callback,atemptCount)},2e3)}})})}},HistoryApiReloader={_reloadDelay:4e3,_atemptCount:0,_currentUrl:!1,_previousUrl:!1,_mode:"autonext",_nextUrl:!1,_forcedChangingMovie:!1,_playerReady:!1,_embed:!1,_historyMvpIds:[],init:function(){var that=this;appEvents.on(appEvents.PLAY_CLIP_ON_URL,function(new_url){that.setCurrentSite(new_url)}),appEvents.on(appEvents.PLAY_CLIP_ON_MVP,function(mvpIds){that._currentUrl&&that._setNextMvpId(mvpIds.oldMvp,mvpIds.newMvp,!1)}),appEvents.on(appEvents.SET_NEW_URL,function(new_url){that.setCurrentSite(new_url)}),appEvents.on(appEvents.NEXT_CLIP_INFO,function(new_clip){that._playerReady?that._prepareNextReload(new_clip):appEvents.listenToOnce(appEvents,appEvents.PLAYER_READY,function(){that._prepareNextReload(new_clip),that._playerReady=!0})}),appEvents.on(appEvents.PLAYER_READY,function(new_clip){that._playerReady=!0})},setPlaylistMode:function(){this._mode="playlist"},setCurrentSite:function(currentUrl){!this._currentUrl||this.executeReload(currentUrl,!0),this._previousUrl=this._currentUrl,this._currentUrl=currentUrl},_prepareNextReload:function(newClip){this._setNextMvpId(newClip.currentMvp,newClip.nextClip.mvpId,!0),"autonext"==this._mode?this._getReloadData(newClip.nextClip.url):this._nextClipTitle=newClip.nextClip.title},_setNextMvpId:function(currentMvpId,nextMvpId,loadOnly){this._historyMvpIds.push(currentMvpId),_.indexOf(this._historyMvpIds,nextMvpId),loadOnly?mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.LOAD_NEXT,{id:currentMvpId,nextId:nextMvpId,loadOnly:loadOnly}):mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PLAY_NEXT,{currentId:currentMvpId,nextId:nextMvpId,playlist:!0,autoplay:!0})},_getReloadData:function(url,cb){var that=this;"https:"==location.protocol&&(url=url.replace("http://","https://")),"onet100.vod.pl"===location.hostname&&(url=url.replace("onet.tv/","onet100.vod.pl/")),"undefined"==typeof siteCache||siteCache.isCached(url)||this._embed?cb&&cb():Backbone.ajax({url:url,success:function(data){siteCache.addToCache(url,data),cb&&cb(data),that._atemptCount=0},error:function(err){that._atemptCount++,that._atemptCount<3&&setTimeout(function(){that._getReloadData(url,cb)},1e3)}})},executeReload:function(url){var that=this;"autonext"==this._mode?"undefined"!=typeof siteCache&&(siteCache.isCached(url)?this._replaceBlocks(url):this._getReloadData(url,function(){that._replaceBlocks(url)})):$("#o_embedTitle").text(this._nextClipTitle)},_replaceBlocks:function(url){var blocks=siteCache.getFromCache(url);for(var i in blocks)blocks.hasOwnProperty(i)&&$(i).html(blocks[i])}};HistoryApiReloader.init();var Detector=function(){var c_name,value,expireseconds,exdate,detectDash=function(){return"WebKitMediaSource"in window||"MediaSource"in window},result={BROWSER_PLUGINS:{FLASH:function(){if(navigator.plugins&&0<navigator.plugins.length){var type="application/x-shockwave-flash",mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description)return!0}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript){var flashObj=null;try{flashObj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(ex){return!1}if(null==flashObj)return!1;try{flashObj.GetVariable("$version")}catch(err){return!1}return!0}return!1}(),SILVERLIGHT:function(version){null==version&&(version=null);var isVersionSupported=!1;try{var tryOlderIE=!1;try{var plugin=navigator.plugins["Silverlight Plug-In"];if(plugin)if(null===version)isVersionSupported=!0;else{var actualVer=plugin.description;"1.0.30226.2"===actualVer&&(actualVer="2.0.30226.2");for(var actualVerArray=actualVer.split(".");3<actualVerArray.length;)actualVerArray.pop();for(;actualVerArray.length<4;)actualVerArray.push(0);for(var requiredVersionPart,actualVersionPart,reqVerArray=version.split(".");4<reqVerArray.length;)reqVerArray.pop();for(var index=0;requiredVersionPart=parseInt(reqVerArray[index]),actualVersionPart=parseInt(actualVerArray[index]),++index<reqVerArray.length&&requiredVersionPart===actualVersionPart;);requiredVersionPart<=actualVersionPart&&!isNaN(requiredVersionPart)&&(isVersionSupported=!0)}else tryOlderIE=!0}catch(e){tryOlderIE=!0}if(tryOlderIE){var control=new ActiveXObject("AgControl.AgControl");null===version?isVersionSupported=!0:control.IsVersionSupported(version)&&(isVersionSupported=!0),control=null}}catch(e){isVersionSupported=!1}return isVersionSupported}(),WIDEVINE:!(-1==navigator.userAgent.toLowerCase().indexOf("msie")&&-1==navigator.userAgent.toLowerCase().indexOf("trident")||!function(){try{return new ActiveXObject("npwidevinemediaoptimizer.WidevineMediaTransformerPlugin"),!0}catch(e){return!1}return!1}())||(void 0!==navigator.mimeTypes["application/x-widevinemediaoptimizer"]&&navigator.mimeTypes["application/x-widevinemediaoptimizer"]?(c_name="FirefoxDisabledCheck",value="",(exdate=new Date).setSeconds(exdate.getSeconds()+expireseconds),document.cookie=c_name+"="+escape(value)+(null==expireseconds?"":";expires="+exdate.toGMTString()),!0):void 0),HTML5:function(){var result=!1;if("undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof HTMLAudioElement&&"undefined"!=typeof HTMLCanvasElement){var video=document.createElement("video");result="function"==typeof video.canPlayType&&("maybe"==video.canPlayType("video/mp4")||"probably"==video.canPlayType("video/mp4")&&-1<window.navigator.userAgent.toLowerCase().indexOf("lg")),delete video}return result}(),DASH:detectDash(),DASH_VIDEWINE:detectDash()&&!!navigator.mimeTypes["application/x-ppapi-widevine-cdm"]}};return result.DRM_AVAILABLE=result.BROWSER_PLUGINS.DASH_VIDEWINE||result.BROWSER_PLUGINS.SILVERLIGHT||result.BROWSER_PLUGINS.FLASH&&result.BROWSER_PLUGINS.WIDEVINE,result}(),DeviceInfo={_callbacks:[],isFreshDeviceConfig:!1,deviceConfig:!1,isDefaultConfig:!1,browserConfig:!1,defaultConfig:{ckmdevice:"PC_DRM",ckmformat:["mp4","ism_PlayReady","flv","hds","ism"],geo:"pl"},init:function(){for(var i in Detector)this[i]=Detector[i];this.browserConfig={plugins:{sl:this.BROWSER_PLUGINS.SILVERLIGHT?"T":"F",fl:this.BROWSER_PLUGINS.FLASH?"T":"F"},ua:navigator.userAgent},this.getFromLS("browserConfig")||this.setToLS("browserConfig",this.browserConfig),!this.getFromLS("browserConfig")||this.getFromLS("browserConfig").plugins.sl===this.browserConfig.plugins.sl&&this.getFromLS("browserConfig").plugins.fl===this.browserConfig.plugins.fl||(this.setToLS("deviceConfig",!1),this.setToLS("browserConfig",this.browserConfig)),this.getFromLS("deviceConfig")?(this.deviceConfig=this.getFromLS("deviceConfig"),this.isDefaultConfig=this._compareDeviceConfig(this.deviceConfig,this.defaultConfig)):this.isFreshDeviceConfig=!0;var that=this;$(document).ready(function(){"undefined"!=typeof onetAds&&void 0!==onetAds.on&&onetAds.on("showAds",function(){that.isFreshDeviceConfig?that.setToLS("onetAdsGeoLoc",onetAds.geoloc.P):that.isObjectInLS("onetAdsGeoLoc")?that.isAdsGeoLocChanged(onetAds.geoloc.P)&&(that.resetDeviceConfig(),that.setToLS("onetAdsGeoLoc",onetAds.geoloc.P)):(that.isBothGeoDetectorsAreEqual(onetAds.geoloc.P)||that.resetDeviceConfig(),that.setToLS("onetAdsGeoLoc",onetAds.geoloc.P))})})},isBothGeoDetectorsAreEqual:function(AdsGeoLocCountry){return 31===AdsGeoLocCountry&&"pl"===this.getFromLS("deviceConfig").geo||31!==AdsGeoLocCountry&&"pl"!==this.getFromLS("deviceConfig").geo},resetDeviceConfig:function(){this.setToLS("deviceConfig",!1)},isAdsGeoLocChanged:function(AdsGeoLocCountry){return this.getFromLS("onetAdsGeoLoc")!==AdsGeoLocCountry},saveDeviceConfig:function(deviceConfig){for(var i in this.deviceConfig=deviceConfig,this.isDefaultConfig=this._compareDeviceConfig(this.deviceConfig,this.defaultConfig),this._callbacks)if(this._callbacks.hasOwnProperty(i))try{this._callbacks[i](this.deviceConfig)}catch(e){}this.setToLS("deviceConfig",deviceConfig)},_compareDeviceConfig:function(dc1,dc2){return dc1.ckmdevice===dc2.ckmdevice&&dc1.geo===dc2.geo&&dc1.ckmformat.sort().toString()===dc2.ckmformat.sort().toString()},isObjectInLS:function(key){return null!==localStorage.getItem(key)},getDeviceConfig:function(cb){this.deviceConfig?cb(this.deviceConfig):this._callbacks.push(cb)},getFromLS:function(key){try{return JSON.parse(localStorage.getItem(key))}catch(e){return!1}},setToLS:function(key,value){try{localStorage.setItem(key,JSON.stringify(value))}catch(e){}}};DeviceInfo.init();var visibilityDetector=function(){var _embedVisibileValue,stateKey,eventKey,_minVisibilityToPlay=.5,_embedVisCallbacks=[],keys={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(stateKey in keys)if(stateKey in document){eventKey=keys[stateKey];break}var visMessage=function(event){try{var data=JSON.parse(event.data);if("number"==typeof data.vis){_embedVisibileValue=data.vis;for(var i=0;i<_embedVisCallbacks.length;i++)_embedVisCallbacks[i](_embedVisibileValue)}return!1}catch(e){return!1}};window.addEventListener?addEventListener("message",visMessage,!1):attachEvent("onmessage",visMessage);var getEmbedVisibleValue=function(){return _embedVisibileValue},tabIsActive=function(){return!document[stateKey]||"undefined"===document[stateKey]};return{tabIsActive:tabIsActive,embedIsVisible:function(){return getEmbedVisibleValue()>=_minVisibilityToPlay},getEmbedVisibleValue:getEmbedVisibleValue,watchTabVisibility:function(callback){if(callback)if(tabIsActive())callback();else{var cb=function(){tabIsActive()&&(callback(),document.removeEventListener(eventKey,cb))};document.addEventListener(eventKey,cb)}return tabIsActive()},watchEmbedVisibility:function(callback){callback&&_embedVisCallbacks.push(callback)},setMinVisibilityToPlay:function(value){"number"==typeof value&&value<=100&&0<=value&&(_minVisibilityToPlay=value/100)}}}(),listManager={_lists:{},listAction:"/_a/list.html",dynamicListAction:"/_a/dlist.html",isHidden:!1,addList:function(listname,listparam){this._lists[listname]=new list(listname,listparam)},registerList:function(listName,cb){void 0!==this._lists[listName]?this._lists[listName].register(cb):console.error(listName),this.isHidden||($("head").append('<style type="text/css">.o_dynamicElement {visibility:hidden;}</style>'),this.isHidden=!0)},closeAddingList:function(){var query={lists:{}};if(DeviceInfo.isDefaultConfig)for(i in this._lists)this._lists[i].isReadyToShow=!0;else{for(i in this._lists)this._lists[i].isDynamicCatalog&&(query.lists[i]=this._lists[i].getQueryParams(),this._lists[i].isRefreshing=!0);if(DeviceInfo.deviceConfig?query.deviceConfig=JSON.stringify(DeviceInfo.deviceConfig):query.browserConfig=JSON.stringify(DeviceInfo.browserConfig),void 0===query.browserConfig&&$.isEmptyObject(query.lists))for(var i in this._lists)this._lists[i].isRegistered?this._lists[i].show():this._lists[i].isReadyToShow=!0;else query.lists=JSON.stringify(query.lists),this.getListsContent(query)}},getListsContent:function(query){var that=this;$.ajax({url:DeviceInfo.deviceConfig?that.listAction:that.dynamicListAction,data:query,success:function(data){for(var index in DeviceInfo.deviceConfig||that.saveDeviceConfig(data),query.lists=JSON.parse(query.lists),query.lists)try{var newHtml=$($(data).find("#o_List"+index+"Wrapper ul")[0]).html();that._lists[index].newHtml=newHtml,that._lists[index].replaceHtml(),that._lists[index].isReadyToShow=!0,that._lists[index].show()}catch(e){that._lists[index].isRegistered?that._lists[index].show():that._lists[index].isReadyToShow=!0}},error:function(){for(var i in that._lists)that._lists[i].isRegistered?that._lists[i].show():that._lists[i].isReadyToShow=!0}})},saveDeviceConfig:function(html){var deviceConfigString=$(html).find("#deviceConfig").html(),deviceConfig=JSON.parse(deviceConfigString);delete deviceConfig.ip,DeviceInfo.saveDeviceConfig(deviceConfig)},refreshObjectReferences:function(listName){this._lists[listName].refreshObjectReferences()},reloadListWithNewQueryParams:function(listName,params){this._lists[listName].setNewQueryParams(params),this.closeAddingList()}},list=function(listName,listParams){this.callbacks=!1,this.newHtml=!1,this.name=listName,this.isRegistered=!1,this.isReadyToShow=!1,this.isLoading=!1,this.isDynamicCatalog=!0,this.isRefreshing=!1,this.queryParams=listParams,this.objectList=!1,this.objectWrapper=!1};list.prototype.getQueryParams=function(){return this.queryParams},list.prototype.setNewQueryParams=function(params){this.queryParams=params},list.prototype.refreshObjectReferences=function(){this.objectList=$($("#o_List"+this.name+"Wrapper ul")[0]),this.objectWrapper=$("#o_List"+this.name+"Wrapper")},list.prototype.register=function(cb){cb&&(this.callbacks=cb),this.objectList=$($("#o_List"+this.name+"Wrapper ul")[0]),this.objectWrapper=$("#o_List"+this.name+"Wrapper"),this.isRegistered=!0,this.replaceHtml(),this.isReadyToShow&&this.show()},list.prototype.replaceHtml=function(){return!(!this.newHtml||!this.objectList)&&(this.objectList.html(this.newHtml),!(this.newHtml=!1))},list.prototype.show=function(){this.callbacks&&void 0!==this.callbacks.onShow&&this.callbacks.onShow(this.objectList),this.objectWrapper&&this.objectWrapper.removeClass("o_dynamicElement")};var poloniaModule=function(){var poloniaGeoDetected=!1,isJustRedirected=!1,videoTitle=!1;if("#geoMessage+"===window.location.hash.substr(0,12)){isJustRedirected=!0;var title=decodeURIComponent(window.location.hash.substr(12));window.location.hash="",$(function(){var message;"Channel"===title.substr(0,7)?message='Przepraszamy, ale nie moemy wywietli zawartoci kanau "'+title.substr(7)+'" w Twoim kraju. <a target="_blank" href="http://pomoc.onet.pl" >Sprawd dlaczego</a>':message='Przepraszamy, ale nie moemy wywietli filmu "'+title+'". <a target="_blank" href="http://pomoc.onet.pl" >Sprawd dlaczego</a>';var closeButton=$("<div>",{class:"noMaterialInfoCloseButton"}),infoBlock=$("<div>",{class:"noMaterialInfo",html:message});infoBlock.prepend(closeButton),$("#o_doc").prepend(infoBlock),closeButton.on("click",function(){infoBlock.hide("fast")}),setTimeout(function(){infoBlock.hide("fast")},8e3)})}DeviceInfo.getDeviceConfig(function(config){"pl"!==config.geo&&(poloniaGeoDetected=!0)});return{isPoloniaVersion:function(){return poloniaGeoDetected},logoHtmlLoaded:function(){!0},onPoloniaVersion:function(){DeviceInfo.deviceConfig.geo="en",clipListManager.clearList(),DeviceInfo.saveDeviceConfig(DeviceInfo.deviceConfig),location.reload(!0)},offPoloniaVersion:function(){localStorage.clear(),location.reload(!0)},goToAlternativeVideo:function(url){DeviceInfo.getDeviceConfig(function(deviceConfig){"pl"===deviceConfig.geo||isJustRedirected||(window.location.href=url+"#geoMessage+"+encodeURIComponent(videoTitle))})},goToSgOnChannel:function(channel){DeviceInfo.getDeviceConfig(function(deviceConfig){"pl"===deviceConfig.geo||isJustRedirected||(window.location.href="/#geoMessage+Channel"+encodeURIComponent(channel))})},setVideoTitle:function(title){videoTitle=title}}}(),disablePlayer=function(url){$(document).ready(function(){var a=document.createElement("a");a.setAttribute("href",url),a.setAttribute("target","_blank"),a.classList.add("shield"),document.getElementById("mainPlayer").appendChild(a)})},gracePeriodManager=function(){var _numberOfDays=1,_periods=[{from:0,to:55,onetTvGracePeriod:180,portalGracePeriod:180},{from:55,to:145,onetTvGracePeriod:180,portalGracePeriod:180},{from:145,to:280,onetTvGracePeriod:180,portalGracePeriod:180},{from:280,to:"max",onetTvGracePeriod:180,portalGracePeriod:180}];function _getSpendTimeAvg(){var data=_getData(),days=_getLatestDates(_getSaveDates(),_numberOfDays),allSpendTime=0;for(var i in days)void 0!==data[days[i]]&&(allSpendTime+=data[days[i]]);return 0===allSpendTime?0:allSpendTime/days.length}function _getData(){try{var data=JSON.parse(localStorage.gracePeriodData)}catch(e){data={}}return data}function _getLatestDates(dates,count){return dates.sort(function(a,b){var dateA=a.split("-"),dateB=b.split("-");return parseInt(dateA[0])>parseInt(dateB[0])?-1:parseInt(dateA[0])<parseInt(dateB[0])?1:parseInt(dateA[1])>parseInt(dateB[1])?-1:parseInt(dateA[1])<parseInt(dateB[1])?1:parseInt(dateA[2])>parseInt(dateB[2])?-1:1}),dates.slice(0,count)}function _setData(data){try{localStorage.gracePeriodData=JSON.stringify(data)}catch(e){}}function _addWatchTime(value){value=parseInt(value/1e3);var date,data=_getData(),today=(date=new Date).getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();void 0===data[today]?data[today]=value:data[today]+=value,_setData(data)}function _getSaveDates(){var dates=[],data=_getData();for(var i in data)data.hasOwnProperty(i)&&dates.push(i);return dates}return{init:function(periods,numberOfdays){var startPlaying,eventHistory;periods&&(_periods=periods),numberOfdays&&(_numberOfDays=numberOfdays),startPlaying=!1,eventHistory=[],appEvents.once(appEvents.PLAYER_START,function(){eventHistory.push(appEvents.PLAYER_START),void 0!==silentPlay&&silentPlay.isRunning()||(startPlaying=new Date)}),appEvents.on(appEvents.PLAYER_RESUME,function(){eventHistory.push(appEvents.PLAYER_RESUME),void 0!==silentPlay&&silentPlay.isRunning()||(startPlaying=new Date)}),appEvents.on(appEvents.KEEP_PLAYING,function(){eventHistory.push(appEvents.KEEP_PLAYING),!startPlaying||void 0!==silentPlay&&silentPlay.isRunning()||(_addWatchTime(new Date-startPlaying),startPlaying=new Date)}),appEvents.on(appEvents.PLAYER_PAUSED,function(){eventHistory.push(appEvents.PLAYER_PAUSED),void 0!==silentPlay&&silentPlay.isRunning()||(_addWatchTime(new Date-startPlaying),startPlaying=!1)}),appEvents.on(appEvents.AD_PLAY,function(){eventHistory.push(appEvents.AD_PLAY),void 0!==silentPlay&&silentPlay.isRunning()||(eventHistory[0]===appEvents.PLAYER_START&&eventHistory[1]===appEvents.AD_PLAY&&2===eventHistory.length||_addWatchTime(new Date-startPlaying),startPlaying=!1)}),appEvents.on(appEvents.AD_STOP,function(){eventHistory.push(appEvents.AD_STOP),void 0!==silentPlay&&silentPlay.isRunning()||(startPlaying=new Date)}),function(){var data=_getData(),importantDays=_getLatestDates(_getSaveDates(),3*_numberOfDays),newData={};for(var i in importantDays)void 0!==data[importantDays[i]]&&(newData[importantDays[i]]=data[importantDays[i]]);_setData(newData)}()},getGracePeriod:function(){var avg=_getSpendTimeAvg();for(var i in _periods)if(avg>=_periods[i].from&&("max"===_periods[i].to||avg<_periods[i].to))return"undefined"!=typeof onetAds&&(void 0!==onetAds.time?onetAds.time.TPSEG=parseInt(i)+1:onetAds.time={TPSEG:parseInt(i)+1},appEvents.once(appEvents.PLAYER_START,function(){void 0!==silentPlay&&silentPlay.isRunning()||dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"playerOnSegment",gaEventAction:parseInt(i)+1,gaEventLabel:avg})})),{onettv:_periods[i].onetTvGracePeriod,portal:_periods[i].portalGracePeriod}},getAvgTime:_getSpendTimeAvg}}(),delayPlay=function(){var _isPlayerReady=!1,_delayTime=1e3,_playerState="off",_playerConfig=null;function _standardStartPlayer(){_playerState="playing",mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PLAY,{id:$(".mvp").attr("id"),offset:0})}function _delayStartPlayer(){_playerState="playing",mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.DELAYED_START,{id:$(".mvp").attr("id"),offset:0,time:_delayTime})}function _setVolume(volume){var notificationName=mvp.PlayerFacade.SET_VOLUME;notificationName&&"number"==typeof volume&&mvp.PlayerFacade.getInstance().sendNotification(notificationName,{id:$(".mvp").attr("id"),volume:volume})}function _onPlayerReady(callback){_isPlayerReady?callback():appEvents.on(appEvents.PLAYER_READY,function(){"function"==typeof callback&&(callback(),callback=null)})}return{init:function(playerConfig){_playerConfig=playerConfig,_onPlayerReady(function(){_isPlayerReady=!0}),visibilityDetector.watchEmbedVisibility(function(visValue){0<visValue&&_onPlayerReady(function(){visibilityDetector.embedIsVisible()?("off"===_playerState&&(onetAds&&-1!==onetAds.target.indexOf("GLOWNA/")||-1<_playerConfig.embedType.indexOf("mainVideo")||_playerConfig.delay?visibilityDetector.watchTabVisibility(_standardStartPlayer):visibilityDetector.watchTabVisibility(_delayStartPlayer)),"pause"===_playerState&&(_playerState="playing",mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.RESUME,{id:$(".mvp").attr("id")})),"number"==typeof _playerConfig.volumeVisOn&&_setVolume(_playerConfig.volumeVisOn)):"playing"===_playerState&&(_playerConfig.playForever?_setVolume(_playerConfig.volumeVisOff):(_playerState="pause",mvp.PlayerFacade.getInstance().sendNotification(mvp.PlayerFacade.PAUSE,{id:$(".mvp").attr("id")})))})})},autoPlay:function(){_onPlayerReady(function(){visibilityDetector.watchTabVisibility(_standardStartPlayer)})}}}(),hash=function(){var hashParams=null,offsetHash=!1,getParams=function(url){var resultParams={},hashSplitParams=location.hash.substring(1).split("&");if(url){hashSplitParams=null;var hashInUrl=url.indexOf("#");-1<hashInUrl&&(hashSplitParams=url.substr(hashInUrl+1).split("&"))}if(hashSplitParams)for(var i=0;i<hashSplitParams.length;i++)-1<hashSplitParams[i].indexOf("=")?(param=hashSplitParams[i].split("="),resultParams[param[0]]=param[1]):-1<hashSplitParams[i].indexOf(":")&&(param=hashSplitParams[i].split(":"),resultParams[param[0]]=param[1]);return url?resultParams:(offsetHash||resultParams=={}||(hashParams=resultParams),hashParams)};return{getParams:getParams,setPlayOffset:function(context,du){var params=getParams();params&&params.play?(document.location.hash="play:"+params.play,offsetHash=!0):"MAIN_ELEMENT"===context&&(du=decodeURIComponent(du),(params=getParams(du))&&params.play&&(document.location.hash="play:"+params.play,offsetHash=!0))}}}(),embedInfoMsg=function(){var _eventMethod=window.addEventListener?"addEventListener":"attachEvent",_messageEvent="attachEvent"==_eventMethod?"onmessage":"message",_isPulsEmbed="undefined"!=typeof isPulsEmbed&&isPulsEmbed,_callbacks={},_childIframe=null,_isVisible=null,_isSilentPlay=null,_parentUrl="undefined"!=typeof originalReferrer?originalReferrer:document.referrer,events={dleBroadcast:["ALL_PLAYER_STOP"],bookmarkletVideo:["GET_VIDEO_INFO","VIDEO_INFO","GET_EMBED_CONFIG","EMBED_CONFIG"],playerEvents:["PLAYING_END","PLAYER_ERROR"]},_executeCallbacks=function(eventName,event){var arrayOfCallbacks=_callbacks[eventName];if(arrayOfCallbacks&&0<arrayOfCallbacks.length)for(var i=0;i<arrayOfCallbacks.length;i++)arrayOfCallbacks[i]&&"function"==typeof arrayOfCallbacks[i].callback&&(arrayOfCallbacks[i].callback(event),!1!==arrayOfCallbacks[i].expire&&delete arrayOfCallbacks[i])},_parseToJson=function(data){try{return JSON.parse(data)}catch(e){return null}};return window[_eventMethod](_messageEvent,function(event){var origin=event.origin,_childIframeSrc=_childIframe?_childIframe.src:"",isEmbedsInfo=-1<_childIframeSrc.indexOf(origin)||-1<location.href.indexOf(origin)||-1<_parentUrl.indexOf(origin);if(event.data&&isEmbedsInfo){var data=_parseToJson(event.data);if(data&&void 0!==data.vis)_isVisible=.5<=parseFloat(data.vis);else if(data){var eventType=Object.keys(data)[0],messageParams=events[eventType]?_parseToJson(data[eventType].message):null;if(messageParams&&-1<events[eventType].indexOf(messageParams.eventName)){var eventName=messageParams.eventName;-1<_childIframeSrc.indexOf(origin)?(_executeCallbacks(eventName,event),data[eventType]&&!data[eventType].id&&(data[eventType].id=location.pathname.split("/")[2]),"dleBroadcast"===eventType&&window.pulsembed&&window.pulsembed.sendBroadcast?window.pulsembed.sendBroadcast(JSON.stringify(data)):self!==top&&window.parent.postMessage(JSON.stringify(data),"*")):_childIframe&&_childIframe.contentWindow&&-1<_parentUrl.indexOf(origin)?-1==location.href.indexOf(data[eventType].id)&&(_executeCallbacks(eventName,event),_childIframe.contentWindow.postMessage(JSON.stringify(data),"*")):-1===_parentUrl.indexOf(data[eventType].id)&&-1===location.href.indexOf(data[eventType].id)&&_executeCallbacks(eventName,event)}}}},!1),{send:function(eventName,obj){var msg=function(eventName,obj){var msg=null;for(var key in events)events[key]&&-1<events[key].indexOf(eventName)&&((msg={})[key]={type:"video",message:JSON.stringify({eventName:eventName,params:obj})});return msg}(eventName,obj);void 0!==silentPlay&&!1!==_isSilentPlay&&(_isSilentPlay=""!==silentPlay.getPlayingType()&&silentPlay.isRunning()),!0!==_isVisible&&(_isPulsEmbed||_isSilentPlay)||!msg||(-1<events.dleBroadcast.indexOf(eventName)&&window.pulsembed&&window.pulsembed.sendBroadcast?window.pulsembed.sendBroadcast(JSON.stringify(msg)):self!==top&&window.parent.postMessage(JSON.stringify(msg),"*"))},on:function(eventName,callback,expire){if(eventName&&"function"==typeof callback){var callbackObj={callback:callback,expire:expire};_callbacks[eventName]?_callbacks[eventName].push(callbackObj):_callbacks[eventName]=[callbackObj]}},off:function(eventName,callback){if(eventName){var cbForEventName=_callbacks[eventName];if(0<cbForEventName.length)if("function"==typeof callback)for(var i=0;i<cbForEventName.length;i++)cbForEventName[i]&&cbForEventName[i].callback===callback&&delete cbForEventName[i];else void 0===callback&&(_callbacks[eventName]=[])}},addIframe:function(el){"object"==typeof el&&"IFRAME"===el.tagName&&(_childIframe=el)},setParentUrl:function(url){/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(url)&&(_parentUrl=url)},getEventParams:function(event){var data=_parseToJson(event.data);return _parseToJson(data.bookmarkletVideo.message)},events:events}}(),debug=function(){embedInfoMsg.on("GET_VIDEO_INFO",function(event){var playerContainer=document.getElementsByClassName("mvp");if(0<playerContainer.length){var eventMessageParams=embedInfoMsg.getEventParams(event),params={mvpId:playerContainer[0].getAttribute("data-mvp"),title:document.title,embedId:eventMessageParams.embedId};embedInfoMsg.send("VIDEO_INFO",params)}},!1),embedInfoMsg.on("GET_EMBED_CONFIG",function(event){if(0<document.getElementsByClassName("mvp").length){var eventMessageParams=embedInfoMsg.getEventParams(event);VB_EMBED_CONFIG={URL:getUrlParams(),MVP:getMvpParams(),PLAYER_CONFIG:getPlayerConfigParams(),STATS_CONFIG:getStatsParams(),embedId:eventMessageParams.embedId},embedInfoMsg.send("EMBED_CONFIG",VB_EMBED_CONFIG),renderData()}},!1);var getStatsParams=function(){return{async:onetAds.async,target:onetAds.target,DV:onetAds.DV,du:onetAds.du,dr:onetAds.dr,adTestKwrd:onetAds.adTestKwrd,noDot:onetAds.noDot,duv:onetAds.duv,VEM:onetAds.VEM,VEP:onetAds.VEP,mvpAdTarget:onetAds.mvpAdTarget,mvpEpisode:onetAds.mvpEpisode,mvpMovie:onetAds.mvpMovie,mvpSeries:onetAds.mvpSeries,_segment:onetAds._segment}},getPlayerConfigParams=function(){for(var playerConfig={},playerConfigEl=document.getElementsByClassName("mvp-params-configuration")[0],j=0;j<playerConfigEl.children.length;j++){var param=playerConfigEl.children[j];playerConfig[param.className]=param.innerText}return playerConfig},getMvpParams=function(){var mvpParams={};if(mvp)for(var key in mvp)"object"!=typeof mvp[key]&&"function"!=typeof mvp[key]&&(mvpParams[key]=mvp[key]);return mvpParams},getUrlParams=function(){for(var urlParams={embedURL:'<a target="blank" href="'+location.href+'">Click</a>',isPulsembed:"undefined"!=typeof isPulsembed&&isPulsembed},urlParamsArray=location.href.match(/[^&?]*?=[^&?]*/g),i=0;i<urlParamsArray.length;i++){var param=urlParamsArray[i].split("=");urlParams[param[0]]=param[1]}return urlParams},renderData=function(){var head=document.getElementsByTagName("head")[0],videoBookmarklet=document.createElement("script");videoBookmarklet.src="http://ocdn.eu/onettv/videoBookmarklet.js?v="+Date.now(),videoBookmarklet.onload=function(){if("undefined"!=typeof VB_EMBED_CONFIG)for(var typeKey in VB_EMBED_CONFIG){var params=VB_EMBED_CONFIG[typeKey];if("object"==typeof params){var htmlData="";for(var paramKey in params)htmlData+="<p><b>"+paramKey+" = </b>"+params[paramKey]+"</p>";$("#"+typeKey+"_PARAMS").html(htmlData)}}},head.appendChild(videoBookmarklet),$(".mvp-fullscreen-on").click(function(){$("#dialogPage").addClass("fullscreen")}),$(".mvp-fullscreen-off").click(function(){$("#dialogPage").removeClass("fullscreen")})}}();

